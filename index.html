<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>קלפי שיח זוגי – גרסת תקציר</title>
<style>
:root{
  --bg:#0b1220;
  --card:#121a2b;
  --ink:#eaf2ff;
  --muted:#b9c7e6;
  --accent:#6aa9ff;
  --good:#39d98a;
  --warn:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Hebrew", "Rubik", Arial, sans-serif;
  background: radial-gradient(1200px 600px at 70% -10%, #1d2b4a 0%, transparent 60%),
              radial-gradient(900px 500px at -20% 110%, #1a2742 0%, transparent 60%),
              var(--bg);
  color:var(--ink);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
}
.app{width:min(880px,100%);}
.shell{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
border:1px solid rgba(255,255,255,0.08); border-radius:22px; box-shadow:0 20px 60px rgba(0,0,0,0.35); overflow:hidden}
header{padding:18px 20px; display:flex; align-items:center; gap:12px; justify-content:space-between; background:rgba(10,15,25,0.6); border-bottom:1px solid rgba(255,255,255,0.08); backdrop-filter: blur(6px);}
.brand{display:flex; align-items:center; gap:12px}
.logo{width:36px; height:36px; border-radius:12px; background:conic-gradient(from 220deg at 50% 50%, #5cabff, #7ae0ff, #5cabff); box-shadow:inset 0 0 18px rgba(255,255,255,0.5), 0 6px 22px rgba(106,169,255,0.5)}
.title{font-weight:700; letter-spacing:0.2px}
.muted{color:var(--muted); font-size:14px}
.row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.btn{appearance:none; border:none; border-radius:14px; padding:10px 14px; color:#0c1322; background:white; font-weight:700; cursor:pointer}
.btn.ghost{background:transparent; color:var(--ink); border:1px solid rgba(255,255,255,0.2)}
.btn.accent{background:linear-gradient(180deg,#86b9ff,#5ba1ff); color:#081222}
.btn:disabled{opacity:.5; cursor:not-allowed}
.main{padding:22px}
.panel{display:grid; gap:18px}
.card{position:relative; min-height:220px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.1); border-radius:20px; padding:26px; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;}
.card h2{margin:0; font-size:28px; line-height:1.4; font-weight:800}
.card .badge{position:absolute; top:14px; inset-inline-start:14px; font-size:12px; color:var(--bg); background:var(--warn); padding:4px 8px; border-radius:999px; font-weight:800}
.card .idx{position:absolute; top:14px; inset-inline-end:14px; font-size:12px; color:var(--muted);}
.toolbar{display:flex; flex-wrap:wrap; gap:10px; justify-content:center}
.toolbar .btn{padding:10px 12px}
.statusbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 14px; border:1px dashed rgba(255,255,255,0.18); border-radius:14px; color:var(--muted)}
.grow{flex:1}
.start{display:grid; gap:16px; text-align:center; padding:26px}
.pill{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1); color:var(--muted); font-size:14px}
.tip{font-size:14px; color:var(--muted); text-align:center}
.small{font-size:12px}
.endScreen{display:grid; gap:16px; text-align:center; padding:40px;}
.endScreen h2{font-size:32px; color:var(--good);}
.endScreen p{font-size:18px; color:var(--muted);}
</style>
</head>
<body>
<div class="app">
<div class="shell" id="app">
<header>
<div class="brand">
<div class="logo" aria-hidden="true"></div>
<div>
<div class="title">קלפי שיח זוגי – גרסת תקציר</div>
<div class="muted small">7 קלפים · ללא אינטרנט · גרסת מחשב</div>
</div>
</div>
<div class="row">
<button class="btn ghost" id="btnHow">איך משחקים?</button>
<button class="btn accent" id="btnStart">התחל</button>
</div>
</header>
<div class="main">
<div class="panel" id="panel">

<!-- מסך פתיחה -->
<section class="start" id="screenStart">
<div class="pill">🎯 מטרת המשחק: זמן של הקשבה, חיבור ושיחה נינוחה</div>
<h1 style="margin:0">ברוכים הבאים</h1>
<p class="muted" style="margin-top:0">כל קלף מציע שאלה לפתיחת שיחה. ענו בתורכם. אין נכון או לא נכון.</p>
<div class="toolbar" style="justify-content:center">
<button class="btn accent" id="btnPlayMixed">לחצו כאן כדי להתחיל</button>
</div>
<div class="tip">טיפ: הגדילו למסך מלא (F11) ונשמו עמוק. זה הזמן שלכם. 💙</div>
</section>

<!-- מסך המשחק -->
<section id="screenGame" style="display:none">
<div class="statusbar">
<div>⏱️ זמן משחק: <strong id="clock">00:00</strong></div>
<div class="grow"></div>
<div>קלף <strong id="pos">1</strong>/<span id="total">7</span></div>
</div>
<div class="card" id="card">
<div class="badge" id="badge"></div>
<div class="idx" id="idx"></div>
<h2 id="q">הקלף יופיע כאן…</h2>
</div>
<div class="toolbar">
<button class="btn" id="btnPrev">⬅️ הקודם</button>
<button class="btn accent" id="btnNext">➡️ הבא</button>
<button class="btn ghost" id="btnCopy">📋 העתק שאלה</button>
<button class="btn ghost" id="btnTip">💡 טיפ</button>
<button class="btn ghost" id="btnReset">🔄 איפוס</button>
</div>
<p class="tip" id="tip">"דברו בתורות, בלי להפריע. הקשבה יוצרת קירבה."</p>
</section>

<!-- מסך הסבר -->
<section id="screenHow" style="display:none">
<h3 style="margin:0 0 8px 0">איך משחקים</h3>
<ol class="muted">
<li>שבו זה מול זו, שקט ונעים. כבו התראות.</li>
<li>בכל תור: אחד קורא את הקלף, השני מקשיב עד הסוף.</li>
<li>מותר לדלג, לשתף קצר או ארוך. בלי ביקורת, רק סקרנות טובה.</li>
<li>בחרו מצב: <strong>מעורבב</strong> לשילוב מפתיע.</li>
</ol>
<div class="row">
<button class="btn" id="btnBack">חזרה</button>
</div>
</section>

<!-- מסך סיום -->
<section id="screenEnd" class="endScreen" style="display:none;">
  <h2>🎉 סיימתם את הגרסה הקצרה!</h2>
  <p>הגרסה המלאה כוללת 40 קלפים עם שאלות נוספות, טיפים מתקדמים וחוויית משחק מלאה.</p>
  <a href="https://toorgi.github.io/tshlum/" target="_blank">
    <button class="btn accent" style="margin-top:20px;">קנו את הגרסה המלאה</button>
  </a>
</section>

<audio id="flipSound" src="flip.mp3"></audio>
<audio id="shuffleSound" src="shuffle.mp3"></audio>
<audio id="endSound" src="end.mp3"></audio>
<audio id="bgSound" src="background.mp3" loop></audio>

</div>
</div>
</div>
</div>

<script>
// --- 7 קלפים בלבד ---
const CARDS = [
  {t:"מה עשה לך טוב השבוע? 😊", lvl:1},
  {t:"איזו מחווה קטנה אשמח לעשות עבורך בימים הקרובים?", lvl:1},
  {t:"זיכרון נעים שיש לך משנינו מהתקופה האחרונה.", lvl:1},
  {t:"איזה רגע שקט ביום גורם לך לחיוך?", lvl:1},
  {t:"בחר/י מילה שמתארת את מצב הרוח שלך היום והסבר/י למה.", lvl:1},
  {t:"מה גורם לבית שלנו להרגיש בית?", lvl:1},
  {t:"מה עוזר לנו לפתור אי-הבנות בצורה טובה?", lvl:3}
];

const TIPS = [
  "דברו בתורות, בלי להפריע. הקשבה יוצרת קירבה.",
  "שאלו שאלות המשך בסקרנות עדינה, לא בחקירה.",
  "אשרו רגשות: \"שמעתי, זה חשוב לך\".",
  "אפשר לקחת רגע שקט לחשיבה – זה מבורך.",
  "חפשו את הטוב. דיבור טוב בונה לב טוב."
];

const el = (id)=>document.getElementById(id);
const screens = { start:el('screenStart'), game:el('screenGame'), how:el('screenHow'), end:el('screenEnd') };
const card = { badge:el('badge'), idx:el('idx'), q:el('q') };
const posEl = el('pos'), totalEl = el('total'), clockEl = el('clock'), tipEl = el('tip');
let deck=[], pos=0, timer=null, seconds=0, tipIdx=0, soundOn=true;

const flipSound=el('flipSound'), shuffleSound=el('shuffleSound'), endSound=el('endSound'), bgAudio=el('bgSound');

function formatTime(s){ const m=Math.floor(s/60).toString().padStart(2,'0'); const ss=(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; }
function startClock(){ stopClock(); timer=setInterval(()=>{ seconds++; clockEl.textContent=formatTime(seconds); },1000); }
function stopClock(){ if(timer){ clearInterval(timer); timer=null; } }
function resetAll(){ seconds=0; clockEl.textContent='00:00'; pos=0; render(); }
function fisherYates(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
function buildDeckMixed(){ deck=fisherYates([...CARDS]); }
function render(){
  totalEl.textContent=deck.length; posEl.textContent=Math.min(pos+1, deck.length);
  if(deck[pos]){ card.q.textContent=deck[pos].t; tipEl.textContent=TIPS[tipIdx]; }
}
function showTip(){ tipIdx=(tipIdx+1)%TIPS.length; tipEl.textContent=TIPS[tipIdx]; if(soundOn) flipSound.play(); }

// --- אירועים ---
el('btnStart').onclick = ()=>{ startGame(); };
el('btnPlayMixed').onclick = ()=>{ startGame(); };

function startGame(){
  screens.start.style.display='none'; screens.game.style.display='block';
  buildDeckMixed(); pos=0; render(); startClock(); bgAudio.play();
}

el('btnHow').onclick = ()=>{ screens.start.style.display='none'; screens.how.style.display='block'; }
el('btnBack').onclick = ()=>{ screens.how.style.display='none'; screens.start.style.display='block'; }

el('btnNext').onclick = ()=>{ 
  if(pos < deck.length - 1){ pos++; render(); if(soundOn) flipSound.play(); }
  else { 
    screens.start.style.display='none'; screens.game.style.display='none'; screens.how.style.display='none'; screens.end.style.display='block';
    stopClock(); bgAudio.pause(); endSound.play();
  }
};
el('btnPrev').onclick = ()=>{ if(pos>0){ pos--; render(); if(soundOn) flipSound.play(); } };
el('btnShuffle').onclick = ()=>{ deck=fisherYates(deck); render(); if(soundOn) shuffleSound.play(); }
el('btnTip').onclick = showTip;
el('btnCopy').onclick = ()=>{ navigator.clipboard.writeText(deck[pos]?.t||''); }
el('btnReset').onclick = resetAll;

</script>
</body>
</html>
